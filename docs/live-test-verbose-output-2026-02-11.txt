ğŸ” VERBOSE MODE ENABLED â€” request/response details will be shown


=== STEP 1: Get OAuth Token ===
    ğŸ“‹ Token endpoint: http://localhost:6000/scim/oauth/token
    ğŸ“‹ â†’ POST http://localhost:6000/scim/oauth/token
    ğŸ“‹   Body: {"grant_type":"client_credentials","client_secret":"changeme-oauth","client_id":"scimserver-client"}
    ğŸ“‹ â† Response: {"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzY2ltdG9vbC1jbGllbnQiLCJjbGllbnRfaWQiOiJzY2ltdG9vbC1jbGllbnQiLCJzY29wZSI6InNjaW0ucmVhZCBzY2ltLndyaXRlIHNjaW0ubWFuYWdlIiwidG9rZW5fdHlwZSI6ImFjY2Vzc190b2tlbiIsImlhdCI6MTc3MDg1NDExNCwiZXhwIjoxNzcwODU3NzE0LCJpc3MiOiJzY2ltdG9vbC1vYXV0aC1...
âœ… Token obtained: eyJhbGciOiJIUzI1NiIsInR5cCI6Ik...
    ğŸ“‹ Token expires_in: 3600s


========================================
TEST SECTION 1: ENDPOINT CRUD OPERATIONS
========================================

--- Test: Create Endpoint ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/admin/endpoints
    ğŸ“‹   Body: {
  "name": "live-test-endpoint-321768979",
  "displayName": "Live Test Endpoint",
  "config": {
    "MultiOpPatchRequestAddMultipleMembersToGroup": "True"
  },
  "description": "Created by l...
    ğŸ“‹ â† Response: {"id":"cmliotfgz019d128vwurivo17","name":"live-test-endpoint-321768979","displayName":"Live Test Endpoint","description":"Created by live-test.ps1","config":{"MultiOpPatchRequestAddMultipleMembersToGroup":"True"},"active":true,"scimEndpoint":"/scim/endpoints/cmliotfgz019d128vwurivo17","createdAt"...
âœ… Create endpoint returned ID: cmliotfgz019d128vwurivo17
âœ… New endpoint is active by default
âœ… scimEndpoint URL is correct

--- Test: Get Endpoint by ID ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/admin/endpoints/cmliotfgz019d128vwurivo17
    ğŸ“‹ â† Response: {"id":"cmliotfgz019d128vwurivo17","name":"live-test-endpoint-321768979","displayName":"Live Test Endpoint","description":"Created by live-test.ps1","config":{"MultiOpPatchRequestAddMultipleMembersToGroup":"True"},"active":true,"scimEndpoint":"/scim/endpoints/cmliotfgz019d128vwurivo17","createdAt"...
âœ… Get endpoint by ID returns correct data

--- Test: Get Endpoint by Name ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/admin/endpoints/by-name/live-test-endpoint-321768979
    ğŸ“‹ â† Response: {"id":"cmliotfgz019d128vwurivo17","name":"live-test-endpoint-321768979","displayName":"Live Test Endpoint","description":"Created by live-test.ps1","config":{"MultiOpPatchRequestAddMultipleMembersToGroup":"True"},"active":true,"scimEndpoint":"/scim/endpoints/cmliotfgz019d128vwurivo17","createdAt"...
âœ… Get endpoint by name returns correct data

--- Test: List Endpoints ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/admin/endpoints
    ğŸ“‹ â† Response: [{"id":"cmliotfgz019d128vwurivo17","name":"live-test-endpoint-321768979","displayName":"Live Test Endpoint","description":"Created by live-test.ps1","config":{"MultiOpPatchRequestAddMultipleMembersToGroup":"True"},"active":true,"scimEndpoint":"/scim/endpoints/cmliotfgz019d128vwurivo17","createdAt...
âœ… List endpoints returns array with items

--- Test: Update Endpoint ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/admin/endpoints/cmliotfgz019d128vwurivo17
    ğŸ“‹   Body: {"displayName":"Updated Live Test Endpoint","description":"Updated description"}
    ğŸ“‹ â† Response: {"id":"cmliotfgz019d128vwurivo17","name":"live-test-endpoint-321768979","displayName":"Updated Live Test Endpoint","description":"Updated description","config":{"MultiOpPatchRequestAddMultipleMembersToGroup":"True"},"active":true,"scimEndpoint":"/scim/endpoints/cmliotfgz019d128vwurivo17","created...
âœ… Update endpoint displayName works
âœ… Update endpoint description works

--- Test: Get Endpoint Stats ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/admin/endpoints/cmliotfgz019d128vwurivo17/stats
    ğŸ“‹ â† Response: {"totalUsers":0,"totalGroups":0,"totalGroupMembers":0,"requestLogCount":0}
âœ… Stats includes totalUsers
âœ… Stats includes totalGroups


========================================
TEST SECTION 2: CONFIG VALIDATION
========================================

--- Test: Invalid Config Value Rejected on Create ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/admin/endpoints
    ğŸ“‹   Body: {"name":"invalid-config-test","config":{"MultiOpPatchRequestAddMultipleMembersToGroup":"Yes"}}
    ğŸ“‹ â† Error: Response status code does not indicate success: 400 (Bad Request).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Invalid value \"Yes\" for config flag \"MultiOpPatchRequestAddMultipleMembersToGroup\". Allowed values: \"True\", \"False\", tru...
âœ… Invalid config 'Yes' rejected with 400 Bad Request

--- Test: Invalid Config Value Rejected on Update ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/admin/endpoints/cmliotfgz019d128vwurivo17
    ğŸ“‹   Body: {"config":{"MultiOpPatchRequestAddMultipleMembersToGroup":"enabled"}}
    ğŸ“‹ â† Error: Response status code does not indicate success: 400 (Bad Request).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Invalid value \"enabled\" for config flag \"MultiOpPatchRequestAddMultipleMembersToGroup\". Allowed values: \"True\", \"False\",...
âœ… Invalid config 'enabled' rejected with 400 Bad Request

--- Test: Valid Config Values Accepted ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/admin/endpoints/cmliotfgz019d128vwurivo17
    ğŸ“‹   Body: {"config":{"MultiOpPatchRequestAddMultipleMembersToGroup":"False"}}
    ğŸ“‹ â† Response: {"id":"cmliotfgz019d128vwurivo17","name":"live-test-endpoint-321768979","displayName":"Updated Live Test Endpoint","description":"Updated description","config":{"MultiOpPatchRequestAddMultipleMembersToGroup":"False"},"active":true,"scimEndpoint":"/scim/endpoints/cmliotfgz019d128vwurivo17","create...
âœ… Valid config 'False' accepted
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/admin/endpoints/cmliotfgz019d128vwurivo17
    ğŸ“‹   Body: {"config":{"MultiOpPatchRequestAddMultipleMembersToGroup":true}}
    ğŸ“‹ â† Response: {"id":"cmliotfgz019d128vwurivo17","name":"live-test-endpoint-321768979","displayName":"Updated Live Test Endpoint","description":"Updated description","config":{"MultiOpPatchRequestAddMultipleMembersToGroup":true},"active":true,"scimEndpoint":"/scim/endpoints/cmliotfgz019d128vwurivo17","createdAt...
âœ… Boolean true accepted as config value

--- Test: Invalid Remove Config Value Rejected on Create ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/admin/endpoints
    ğŸ“‹   Body: {"name":"invalid-remove-config-test","config":{"MultiOpPatchRequestRemoveMultipleMembersFromGroup":"Yes"}}
    ğŸ“‹ â† Error: Response status code does not indicate success: 400 (Bad Request).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Invalid value \"Yes\" for config flag \"MultiOpPatchRequestRemoveMultipleMembersFromGroup\". Allowed values: \"True\", \"False\"...
âœ… Invalid remove config 'Yes' rejected with 400 Bad Request

--- Test: Invalid Remove Config Value Rejected on Update ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/admin/endpoints/cmliotfgz019d128vwurivo17
    ğŸ“‹   Body: {"config":{"MultiOpPatchRequestRemoveMultipleMembersFromGroup":"enabled"}}
    ğŸ“‹ â† Error: Response status code does not indicate success: 400 (Bad Request).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Invalid value \"enabled\" for config flag \"MultiOpPatchRequestRemoveMultipleMembersFromGroup\". Allowed values: \"True\", \"Fal...
âœ… Invalid remove config 'enabled' rejected with 400 Bad Request

--- Test: Valid Remove Config Values Accepted ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/admin/endpoints/cmliotfgz019d128vwurivo17
    ğŸ“‹   Body: {"config":{"MultiOpPatchRequestRemoveMultipleMembersFromGroup":"False"}}
    ğŸ“‹ â† Response: {"id":"cmliotfgz019d128vwurivo17","name":"live-test-endpoint-321768979","displayName":"Updated Live Test Endpoint","description":"Updated description","config":{"MultiOpPatchRequestRemoveMultipleMembersFromGroup":"False"},"active":true,"scimEndpoint":"/scim/endpoints/cmliotfgz019d128vwurivo17","c...
âœ… Valid remove config 'False' accepted

--- Test: Both Config Flags Set Together ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/admin/endpoints/cmliotfgz019d128vwurivo17
    ğŸ“‹   Body: {"config":{"MultiOpPatchRequestAddMultipleMembersToGroup":"True","MultiOpPatchRequestRemoveMultipleMembersFromGroup":"True"}}
    ğŸ“‹ â† Response: {"id":"cmliotfgz019d128vwurivo17","name":"live-test-endpoint-321768979","displayName":"Updated Live Test Endpoint","description":"Updated description","config":{"MultiOpPatchRequestAddMultipleMembersToGroup":"True","MultiOpPatchRequestRemoveMultipleMembersFromGroup":"True"},"active":true,"scimEnd...
âœ… Both add and remove config flags set together

--- Test: Invalid VerbosePatchSupported Config Value Rejected ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/admin/endpoints/cmliotfgz019d128vwurivo17
    ğŸ“‹   Body: {"config":{"VerbosePatchSupported":"Yes"}}
    ğŸ“‹ â† Error: Response status code does not indicate success: 400 (Bad Request).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Invalid value \"Yes\" for config flag \"VerbosePatchSupported\". Allowed values: \"True\", \"False\", true, false, \"1\", \"0\"....
âœ… Invalid VerbosePatchSupported 'Yes' rejected with 400 Bad Request

--- Test: Valid VerbosePatchSupported Config Value Accepted ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/admin/endpoints/cmliotfgz019d128vwurivo17
    ğŸ“‹   Body: {"config":{"VerbosePatchSupported":true}}
    ğŸ“‹ â† Response: {"id":"cmliotfgz019d128vwurivo17","name":"live-test-endpoint-321768979","displayName":"Updated Live Test Endpoint","description":"Updated description","config":{"VerbosePatchSupported":true},"active":true,"scimEndpoint":"/scim/endpoints/cmliotfgz019d128vwurivo17","createdAt":"2026-02-11T23:55:14....
âœ… VerbosePatchSupported boolean true accepted

--- Test: All Three Config Flags Set Together ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/admin/endpoints/cmliotfgz019d128vwurivo17
    ğŸ“‹   Body: {"config":{"MultiOpPatchRequestAddMultipleMembersToGroup":"True","MultiOpPatchRequestRemoveMultipleMembersFromGroup":"True","VerbosePatchSupported":true}}
    ğŸ“‹ â† Response: {"id":"cmliotfgz019d128vwurivo17","name":"live-test-endpoint-321768979","displayName":"Updated Live Test Endpoint","description":"Updated description","config":{"MultiOpPatchRequestAddMultipleMembersToGroup":"True","MultiOpPatchRequestRemoveMultipleMembersFromGroup":"True","VerbosePatchSupported"...
âœ… All three config flags set together


========================================
TEST SECTION 3: SCIM USER OPERATIONS
========================================

--- Test: Create User ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹   Body: {
  "active": true,
  "displayName": "Live Test User",
  "emails": [
    {
      "type": "work",
      "value": "livetest-user@test.com",
      "primary": true
    }
  ],
  "name": {
   ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Live Test User","emails":[{"type":"work","value":"livetest-user@test.com","primary":true}],"name":{"familyName":"Test","givenName"...
âœ… Create user returned ID: 1a7a769a-3af5-433f-bd64-4d5421ae803f
âœ… User userName is correct
âœ… User meta.resourceType is 'User'
âœ… User meta.location is present
âœ… User meta.location contains correct path
âœ… User meta.created is present
âœ… User meta.lastModified is present

--- Test: Get User by ID ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Live Test User","emails":[{"type":"work","value":"livetest-user@test.com","primary":true}],"name":{"familyName":"Test","givenName"...
âœ… Get user by ID returns correct data

--- Test: List Users ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":1,"startIndex":1,"itemsPerPage":1,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Li...
âœ… List users returns at least 1 user
âœ… List users has correct schema

--- Test: Filter Users by userName ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users?filter=userName eq "livetest-user@test.com"
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":1,"startIndex":1,"itemsPerPage":1,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Li...
âœ… Filter by userName returns exactly 1 user

--- Test: PATCH User ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": "Updated Display Name",
      "path": "displayName",
      "op": "replace"
...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Updated Display Name","emails":[{"type":"work","value":"livetest-user@test.com","primary":true}],"name":{"familyName":"Test","give...
âœ… PATCH user displayName works

--- Test: PUT User (Replace) ---
    ğŸ“‹ â†’ PUT http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "displayName": "Replaced Display Name",
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "livetest-user@test.com"
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Replaced Display Name","meta":{"resourceType":"User","created":"2026-02-11T23:55:14.383Z","lastModified":"2026-02-11T23:55:14.469Z...
âœ… PUT user (replace) works

--- Test: Deactivate User (Soft Delete) ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": false,
      "path": "active",
      "op": "replace"
    }
  ]
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":false,"displayName":"Replaced Display Name","meta":{"resourceType":"User","created":"2026-02-11T23:55:14.383Z","lastModified":"2026-02-11T23:55:14.499...
âœ… Deactivate user (active=false) works
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": true,
      "path": "active",
      "op": "replace"
    }
  ]
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Replaced Display Name","meta":{"resourceType":"User","created":"2026-02-11T23:55:14.383Z","lastModified":"2026-02-11T23:55:14.529Z...


========================================
TEST SECTION 3b: CASE-INSENSITIVITY (RFC 7643)
========================================

--- Test: Case-Insensitive userName Uniqueness ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹   Body: {
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "LIVETEST-USER@TEST.COM"
}
    ğŸ“‹ â† Error: Response status code does not indicate success: 409 (Conflict).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"A resource with userName 'LIVETEST-USER@TEST.COM' already exists.","scimType":"uniqueness","status":"409"}
âœ… UPPERCASE duplicate userName returns 409 (case-insensitive uniqueness)
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹   Body: {
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "LiveTest-User@Test.Com"
}
    ğŸ“‹ â† Error: Response status code does not indicate success: 409 (Conflict).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"A resource with userName 'LiveTest-User@Test.Com' already exists.","scimType":"uniqueness","status":"409"}
âœ… Mixed-case duplicate userName returns 409

--- Test: Case-Insensitive Filter Attribute Names ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users?filter=USERNAME eq "livetest-user@test.com"
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":1,"startIndex":1,"itemsPerPage":1,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Re...
âœ… Filter with 'USERNAME' (uppercase) finds user
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users?filter=UserName eq "livetest-user@test.com"
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":1,"startIndex":1,"itemsPerPage":1,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Re...
âœ… Filter with 'UserName' (PascalCase) finds user

--- Test: Case-Insensitive Filter Value (userName) ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users?filter=userName eq "LIVETEST-USER@TEST.COM"
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":1,"startIndex":1,"itemsPerPage":1,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Re...
âœ… Filter with UPPERCASE value finds user (case-insensitive)

--- Test: PascalCase PATCH op Values ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": "PascalCase Patched",
      "path": "displayName",
      "op": "Replace"
  ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"PascalCase Patched","meta":{"resourceType":"User","created":"2026-02-11T23:55:14.383Z","lastModified":"2026-02-11T23:55:14.6Z","lo...
âœ… PATCH with 'Replace' (PascalCase op) works
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": "Add Op Patched",
      "path": "displayName",
      "op": "Add"
    }
  ]
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Add Op Patched","meta":{"resourceType":"User","created":"2026-02-11T23:55:14.383Z","lastModified":"2026-02-11T23:55:14.622Z","loca...
âœ… PATCH with 'Add' (PascalCase op) works


========================================
TEST SECTION 3c: ADVANCED PATCH OPERATIONS
========================================

--- Test: PATCH with No Path (Merge) ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "op": "replace",
      "value": {
        "displayName": "No-Path Merged",
        "...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"No-Path Merged","meta":{"resourceType":"User","created":"2026-02-11T23:55:14.383Z","lastModified":"2026-02-11T23:55:14.64Z","locat...
âœ… PATCH with no path merges displayName
âœ… PATCH with no path merges active

--- Test: No-Path PATCH with Case-Insensitive Keys ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "op": "replace",
      "value": {
        "DisplayName": "CI-Keys Merged",
        "...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"CI-Keys Merged","meta":{"resourceType":"User","created":"2026-02-11T23:55:14.383Z","lastModified":"2026-02-11T23:55:14.685Z","loca...
âœ… No-path PATCH with 'DisplayName' (PascalCase key) works

--- Test: PATCH with valuePath ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "op": "replace",
      "value": {
        "emails": [
          {
            "type...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"CI-Keys Merged","emails":[{"type":"work","value":"work@test.com","primary":true},{"type":"home","value":"home@test.com"}],"meta":{...
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": "updated-work@test.com",
      "path": "emails[type eq \"work\"].value",
   ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"CI-Keys Merged","emails":[{"type":"work","value":"updated-work@test.com","primary":true},{"type":"home","value":"home@test.com"}],...
âœ… PATCH with valuePath updates emails[type eq work].value
âœ… valuePath PATCH does not affect other email entries

--- Test: PATCH with Extension URN Path ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": "Engineering",
      "path": "urn:ietf:params:scim:schemas:extension:enterpri...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"CI-Keys Merged","emails":[{"type":"work","value":"updated-work@test.com","primary":true},{"type":"home","value":"home@test.com"}],...
âœ… PATCH with extension URN path sets department
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": "Product",
      "path": "urn:ietf:params:scim:schemas:extension:enterprise:2...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"CI-Keys Merged","emails":[{"type":"work","value":"updated-work@test.com","primary":true},{"type":"home","value":"home@test.com"}],...
âœ… PATCH with extension URN replace updates department

--- Test: Manager Empty-Value Removal (RFC 7644 Â§3.5.2.3) ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": {
        "value": "manager-id-123"
      },
      "path": "urn:ietf:params...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"CI-Keys Merged","emails":[{"type":"work","value":"updated-work@test.com","primary":true},{"type":"home","value":"home@test.com"}],...
âœ… Manager set successfully via extension URN
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": {
        "value": ""
      },
      "path": "urn:ietf:params:scim:schemas:...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"CI-Keys Merged","emails":[{"type":"work","value":"updated-work@test.com","primary":true},{"type":"home","value":"home@test.com"}],...
âœ… Manager removed when value is empty string (RFC 7644 Â§3.5.2.3)

--- Test: Multiple Operations in Single PATCH ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": "Multi-Op User",
      "path": "displayName",
      "op": "replace"
    },...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":false,"displayName":"Multi-Op User","emails":[{"type":"work","value":"updated-work@test.com","primary":true},{"type":"home","value":"home@test.com"}],...
âœ… Multi-op PATCH: displayName updated
âœ… Multi-op PATCH: active set to false
âœ… Multi-op PATCH: title added
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": true,
      "path": "active",
      "op": "replace"
    }
  ]
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Multi-Op User","emails":[{"type":"work","value":"updated-work@test.com","primary":true},{"type":"home","value":"home@test.com"}],"...


========================================
TEST SECTION 3d: PAGINATION & ADVANCED FILTERING
========================================

--- Setup: Create Users for Pagination ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹   Body: {
  "externalId": "ext-pag-1",
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "pagination-user1@test.com",
  "displayName": "Pagination ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"ec95ae20-3519-4208-b05a-80cde5bbb8c6","userName":"pagination-user1@test.com","externalId":"ext-pag-1","active":true,"displayName":"Pagination User 1","meta":{"resourceType":"User","created":"2026-02-11T23:55:14.902Z","lastModified":"...
  Created pagination user 1 : ec95ae20-3519-4208-b05a-80cde5bbb8c6
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹   Body: {
  "externalId": "ext-pag-2",
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "pagination-user2@test.com",
  "displayName": "Pagination ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"fb5b8927-95c5-4c53-aafe-282c528b2fbf","userName":"pagination-user2@test.com","externalId":"ext-pag-2","active":true,"displayName":"Pagination User 2","meta":{"resourceType":"User","created":"2026-02-11T23:55:14.914Z","lastModified":"...
  Created pagination user 2 : fb5b8927-95c5-4c53-aafe-282c528b2fbf
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹   Body: {
  "externalId": "ext-pag-3",
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "pagination-user3@test.com",
  "displayName": "Pagination ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"abaa69df-47e6-4250-ae8b-f341283a5eec","userName":"pagination-user3@test.com","externalId":"ext-pag-3","active":true,"displayName":"Pagination User 3","meta":{"resourceType":"User","created":"2026-02-11T23:55:14.934Z","lastModified":"...
  Created pagination user 3 : abaa69df-47e6-4250-ae8b-f341283a5eec

--- Test: Pagination with count ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users?count=2
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":4,"startIndex":1,"itemsPerPage":2,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Mu...
âœ… Pagination: itemsPerPage matches count=2
âœ… Pagination: totalResults >= 4 (all users)
âœ… Pagination: Resources array has 2 items

--- Test: Pagination with startIndex ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users?startIndex=2&count=2
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":4,"startIndex":2,"itemsPerPage":2,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"ec95ae20-3519-4208-b05a-80cde5bbb8c6","userName":"pagination-user1@test.com","externalId":"ext-pag-1","ac...
âœ… Pagination: startIndex=2 reflected in response
âœ… Pagination: startIndex+count returns correct page size

--- Test: Filter by externalId ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users?filter=externalId eq "ext-pag-1"
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":1,"startIndex":1,"itemsPerPage":1,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"ec95ae20-3519-4208-b05a-80cde5bbb8c6","userName":"pagination-user1@test.com","externalId":"ext-pag-1","ac...
âœ… Filter by externalId returns exactly 1 user
âœ… Filtered user has correct externalId
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users?filter=EXTERNALID eq "ext-pag-2"
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":1,"startIndex":1,"itemsPerPage":1,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"fb5b8927-95c5-4c53-aafe-282c528b2fbf","userName":"pagination-user2@test.com","externalId":"ext-pag-2","ac...
âœ… Filter with 'EXTERNALID' (uppercase attr) finds user

--- Test: externalId Uniqueness ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹   Body: {
  "externalId": "ext-pag-1",
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "dup-ext-test@test.com"
}
    ğŸ“‹ â† Error: Response status code does not indicate success: 409 (Conflict).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"A resource with externalId 'ext-pag-1' already exists.","scimType":"uniqueness","status":"409"}
âœ… Duplicate externalId returns 409 Conflict


========================================
TEST SECTION 4: SCIM GROUP OPERATIONS
========================================

--- Test: Create Group ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:Group"
  ],
  "displayName": "Live Test Group"
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"f810e9f6-1e01-448c-acd2-365ffed5968f","displayName":"Live Test Group","members":[],"meta":{"resourceType":"Group","created":"2026-02-11T23:55:15.019Z","lastModified":"2026-02-11T23:55:15.019Z","location":"http://localhost:6000/scim/...
âœ… Create group returned ID: f810e9f6-1e01-448c-acd2-365ffed5968f
âœ… Group displayName is correct
âœ… Group meta.resourceType is 'Group'
âœ… Group meta.location is present
âœ… Group meta.location contains correct path
âœ… Group meta.created is present

--- Test: Get Group by ID ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups/f810e9f6-1e01-448c-acd2-365ffed5968f
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"f810e9f6-1e01-448c-acd2-365ffed5968f","displayName":"Live Test Group","members":[],"meta":{"resourceType":"Group","created":"2026-02-11T23:55:15.019Z","lastModified":"2026-02-11T23:55:15.019Z","location":"http://localhost:6000/scim/...
âœ… Get group by ID returns correct data

--- Test: List Groups ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":1,"startIndex":1,"itemsPerPage":1,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"f810e9f6-1e01-448c-acd2-365ffed5968f","displayName":"Live Test Group","members":[],"meta":{"resourceType...
âœ… List groups returns at least 1 group

--- Test: PATCH Group (Add Member) ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups/f810e9f6-1e01-448c-acd2-365ffed5968f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": [
        {
          "value": "1a7a769a-3af5-433f-bd64-4d5421ae803f"
     ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"f810e9f6-1e01-448c-acd2-365ffed5968f","displayName":"Live Test Group","members":[{"value":"1a7a769a-3af5-433f-bd64-4d5421ae803f"}],"meta":{"resourceType":"Group","created":"2026-02-11T23:55:15.019Z","lastModified":"2026-02-11T23:55:...
âœ… Group PATCH returns response body (not 204)
âœ… PATCH add member works

--- Test: PATCH Group (Remove Member) ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups/f810e9f6-1e01-448c-acd2-365ffed5968f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "op": "remove",
      "path": "members[value eq \"1a7a769a-3af5-433f-bd64-4d5421ae803f...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"f810e9f6-1e01-448c-acd2-365ffed5968f","displayName":"Live Test Group","members":[],"meta":{"resourceType":"Group","created":"2026-02-11T23:55:15.019Z","lastModified":"2026-02-11T23:55:15.123Z","location":"http://localhost:6000/scim/...
âœ… Group PATCH remove returns response body
âœ… PATCH remove member works

--- Test: PUT Group (Replace) ---
    ğŸ“‹ â†’ PUT http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups/f810e9f6-1e01-448c-acd2-365ffed5968f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:Group"
  ],
  "displayName": "Replaced Group Name"
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"f810e9f6-1e01-448c-acd2-365ffed5968f","displayName":"Replaced Group Name","members":[],"meta":{"resourceType":"Group","created":"2026-02-11T23:55:15.019Z","lastModified":"2026-02-11T23:55:15.152Z","location":"http://localhost:6000/s...
âœ… PUT group (replace) works

--- Test: Group externalId Support ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups
    ğŸ“‹   Body: {
  "displayName": "Group With ExternalId",
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:Group"
  ],
  "externalId": "ext-group-123"
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"8d9351d9-2302-4339-b53a-9be70fd3de7c","externalId":"ext-group-123","displayName":"Group With ExternalId","members":[],"meta":{"resourceType":"Group","created":"2026-02-11T23:55:15.214Z","lastModified":"2026-02-11T23:55:15.214Z","loc...
âœ… Group created with externalId
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups?filter=externalId eq "ext-group-123"
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":1,"startIndex":1,"itemsPerPage":1,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"8d9351d9-2302-4339-b53a-9be70fd3de7c","externalId":"ext-group-123","displayName":"Group With ExternalId"...
âœ… Filter groups by externalId returns exactly 1 group
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups
    ğŸ“‹   Body: {
  "displayName": "Dup ExternalId Group",
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:Group"
  ],
  "externalId": "ext-group-123"
}
    ğŸ“‹ â† Error: Response status code does not indicate success: 409 (Conflict).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"A group with externalId 'ext-group-123' already exists.","scimType":"uniqueness","status":"409"}
âœ… Duplicate group externalId returns 409 Conflict


========================================
TEST SECTION 5: MULTI-MEMBER PATCH CONFIG FLAG
========================================

--- Create Additional Users for Multi-Member Test ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹   Body: {
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "livetest-multi-user2@test.com"
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"cbb25df6-1f82-4dc3-bf45-5b1186feedb8","userName":"livetest-multi-user2@test.com","active":true,"meta":{"resourceType":"User","created":"2026-02-11T23:55:15.245Z","lastModified":"2026-02-11T23:55:15.245Z","location":"http://localhost:...
Created user 2 : cbb25df6-1f82-4dc3-bf45-5b1186feedb8
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹   Body: {
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "livetest-multi-user3@test.com"
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"ca5ba7f2-aee9-4e2e-b875-2769c1c70577","userName":"livetest-multi-user3@test.com","active":true,"meta":{"resourceType":"User","created":"2026-02-11T23:55:15.257Z","lastModified":"2026-02-11T23:55:15.257Z","location":"http://localhost:...
Created user 3 : ca5ba7f2-aee9-4e2e-b875-2769c1c70577
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:Group"
  ],
  "displayName": "Multi-Member Test Group"
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"b0fb1c57-5649-467c-9ad6-3c1f7674d6d1","displayName":"Multi-Member Test Group","members":[],"meta":{"resourceType":"Group","created":"2026-02-11T23:55:15.289Z","lastModified":"2026-02-11T23:55:15.289Z","location":"http://localhost:60...

--- Test: Multi-Member PATCH with Flag=True ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups/b0fb1c57-5649-467c-9ad6-3c1f7674d6d1
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": [
        {
          "value": "1a7a769a-3af5-433f-bd64-4d5421ae803f"
     ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"b0fb1c57-5649-467c-9ad6-3c1f7674d6d1","displayName":"Multi-Member Test Group","members":[{"value":"1a7a769a-3af5-433f-bd64-4d5421ae803f"},{"value":"cbb25df6-1f82-4dc3-bf45-5b1186feedb8"},{"value":"ca5ba7f2-aee9-4e2e-b875-2769c1c7057...
âœ… Multi-member PATCH with flag=True accepted (3 members added)

--- Create Endpoint Without Flag ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/admin/endpoints
    ğŸ“‹   Body: {
  "displayName": "No Flag Endpoint",
  "name": "live-test-no-flag-685290583"
}
    ğŸ“‹ â† Response: {"id":"cmliotgcl01bm128v331k664y","name":"live-test-no-flag-685290583","displayName":"No Flag Endpoint","active":true,"scimEndpoint":"/scim/endpoints/cmliotgcl01bm128v331k664y","createdAt":"2026-02-11T23:55:15.334Z","updatedAt":"2026-02-11T23:55:15.334Z"}
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotgcl01bm128v331k664y/Users
    ğŸ“‹   Body: {
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "noflag-user1@test.com"
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"fdc33a2d-66b8-4f3c-a2cc-331ec048e448","userName":"noflag-user1@test.com","active":true,"meta":{"resourceType":"User","created":"2026-02-11T23:55:15.355Z","lastModified":"2026-02-11T23:55:15.355Z","location":"http://localhost:6000/sci...
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotgcl01bm128v331k664y/Users
    ğŸ“‹   Body: {
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "noflag-user2@test.com"
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"0ec58604-f3d5-415c-a0b1-5593596c7a5b","userName":"noflag-user2@test.com","active":true,"meta":{"resourceType":"User","created":"2026-02-11T23:55:15.386Z","lastModified":"2026-02-11T23:55:15.386Z","location":"http://localhost:6000/sci...
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotgcl01bm128v331k664y/Groups
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:Group"
  ],
  "displayName": "No Flag Group"
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"0fad9055-3e12-4290-8e63-f0176ca895f7","displayName":"No Flag Group","members":[],"meta":{"resourceType":"Group","created":"2026-02-11T23:55:15.417Z","lastModified":"2026-02-11T23:55:15.417Z","location":"http://localhost:6000/scim/en...

--- Test: Multi-Member ADD PATCH without Flag (Should Fail) ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotgcl01bm128v331k664y/Groups/0fad9055-3e12-4290-8e63-f0176ca895f7
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": [
        {
          "value": "fdc33a2d-66b8-4f3c-a2cc-331ec048e448"
     ...
    ğŸ“‹ â† Error: Response status code does not indicate success: 400 (Bad Request).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Adding multiple members in a single operation is not allowed. Each member must be added in a separate PATCH operation. To enable...
âœ… Multi-member ADD without flag rejected with 400 Bad Request


========================================
TEST SECTION 5b: MULTI-MEMBER REMOVE CONFIG FLAG
========================================

--- Setup: Add Members Individually for Remove Test ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups/b0fb1c57-5649-467c-9ad6-3c1f7674d6d1
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": [
        {
          "value": "1a7a769a-3af5-433f-bd64-4d5421ae803f"
     ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"b0fb1c57-5649-467c-9ad6-3c1f7674d6d1","displayName":"Multi-Member Test Group","members":[{"value":"1a7a769a-3af5-433f-bd64-4d5421ae803f"},{"value":"cbb25df6-1f82-4dc3-bf45-5b1186feedb8"},{"value":"ca5ba7f2-aee9-4e2e-b875-2769c1c7057...
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups/b0fb1c57-5649-467c-9ad6-3c1f7674d6d1
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": [
        {
          "value": "cbb25df6-1f82-4dc3-bf45-5b1186feedb8"
     ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"b0fb1c57-5649-467c-9ad6-3c1f7674d6d1","displayName":"Multi-Member Test Group","members":[{"value":"1a7a769a-3af5-433f-bd64-4d5421ae803f"},{"value":"cbb25df6-1f82-4dc3-bf45-5b1186feedb8"},{"value":"ca5ba7f2-aee9-4e2e-b875-2769c1c7057...
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups/b0fb1c57-5649-467c-9ad6-3c1f7674d6d1
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": [
        {
          "value": "ca5ba7f2-aee9-4e2e-b875-2769c1c70577"
     ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"b0fb1c57-5649-467c-9ad6-3c1f7674d6d1","displayName":"Multi-Member Test Group","members":[{"value":"1a7a769a-3af5-433f-bd64-4d5421ae803f"},{"value":"cbb25df6-1f82-4dc3-bf45-5b1186feedb8"},{"value":"ca5ba7f2-aee9-4e2e-b875-2769c1c7057...
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups/b0fb1c57-5649-467c-9ad6-3c1f7674d6d1
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"b0fb1c57-5649-467c-9ad6-3c1f7674d6d1","displayName":"Multi-Member Test Group","members":[{"value":"1a7a769a-3af5-433f-bd64-4d5421ae803f"},{"value":"cbb25df6-1f82-4dc3-bf45-5b1186feedb8"},{"value":"ca5ba7f2-aee9-4e2e-b875-2769c1c7057...
Group has 3 members before remove test

--- Test: Multi-Member REMOVE without Flag (Should Fail) ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotgcl01bm128v331k664y/Groups/0fad9055-3e12-4290-8e63-f0176ca895f7
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": [
        {
          "value": "fdc33a2d-66b8-4f3c-a2cc-331ec048e448"
     ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"0fad9055-3e12-4290-8e63-f0176ca895f7","displayName":"No Flag Group","members":[{"value":"fdc33a2d-66b8-4f3c-a2cc-331ec048e448"}],"meta":{"resourceType":"Group","created":"2026-02-11T23:55:15.417Z","lastModified":"2026-02-11T23:55:15...
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotgcl01bm128v331k664y/Groups/0fad9055-3e12-4290-8e63-f0176ca895f7
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": [
        {
          "value": "0ec58604-f3d5-415c-a0b1-5593596c7a5b"
     ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"0fad9055-3e12-4290-8e63-f0176ca895f7","displayName":"No Flag Group","members":[{"value":"fdc33a2d-66b8-4f3c-a2cc-331ec048e448"},{"value":"0ec58604-f3d5-415c-a0b1-5593596c7a5b"}],"meta":{"resourceType":"Group","created":"2026-02-11T2...
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotgcl01bm128v331k664y/Groups/0fad9055-3e12-4290-8e63-f0176ca895f7
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": [
        {
          "value": "fdc33a2d-66b8-4f3c-a2cc-331ec048e448"
     ...
    ğŸ“‹ â† Error: Response status code does not indicate success: 400 (Bad Request).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Removing multiple members in a single operation is not allowed. Each member must be removed in a separate PATCH operation. To en...
âœ… Multi-member REMOVE without flag rejected with 400 Bad Request

--- Test: Multi-Member REMOVE with Flag=True ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/admin/endpoints
    ğŸ“‹   Body: {
  "name": "live-test-remove-flag-441837886",
  "displayName": "Remove Flag Endpoint",
  "config": {
    "MultiOpPatchRequestRemoveMultipleMembersFromGroup": "True"
  }
}
    ğŸ“‹ â† Response: {"id":"cmliotgkj01cj128vkjq1rd0x","name":"live-test-remove-flag-441837886","displayName":"Remove Flag Endpoint","config":{"MultiOpPatchRequestRemoveMultipleMembersFromGroup":"True"},"active":true,"scimEndpoint":"/scim/endpoints/cmliotgkj01cj128vkjq1rd0x","createdAt":"2026-02-11T23:55:15.619Z","up...
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotgkj01cj128vkjq1rd0x/Users
    ğŸ“‹   Body: {
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "rfuser1@test.com"
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"8aecb0b2-76a6-4828-92aa-e2fbd6227efc","userName":"rfuser1@test.com","active":true,"meta":{"resourceType":"User","created":"2026-02-11T23:55:15.644Z","lastModified":"2026-02-11T23:55:15.644Z","location":"http://localhost:6000/scim/end...
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotgkj01cj128vkjq1rd0x/Users
    ğŸ“‹   Body: {
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "rfuser2@test.com"
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1c67f0d2-1326-41c1-9134-2e02669f2fdf","userName":"rfuser2@test.com","active":true,"meta":{"resourceType":"User","created":"2026-02-11T23:55:15.657Z","lastModified":"2026-02-11T23:55:15.657Z","location":"http://localhost:6000/scim/end...
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotgkj01cj128vkjq1rd0x/Groups
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:Group"
  ],
  "displayName": "Remove Flag Group"
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"0f5a57ef-9d61-40a3-9ed2-acd980dee020","displayName":"Remove Flag Group","members":[],"meta":{"resourceType":"Group","created":"2026-02-11T23:55:15.695Z","lastModified":"2026-02-11T23:55:15.695Z","location":"http://localhost:6000/sci...
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotgkj01cj128vkjq1rd0x/Groups/0f5a57ef-9d61-40a3-9ed2-acd980dee020
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": [
        {
          "value": "8aecb0b2-76a6-4828-92aa-e2fbd6227efc"
     ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"0f5a57ef-9d61-40a3-9ed2-acd980dee020","displayName":"Remove Flag Group","members":[{"value":"8aecb0b2-76a6-4828-92aa-e2fbd6227efc"}],"meta":{"resourceType":"Group","created":"2026-02-11T23:55:15.695Z","lastModified":"2026-02-11T23:5...
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotgkj01cj128vkjq1rd0x/Groups/0f5a57ef-9d61-40a3-9ed2-acd980dee020
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": [
        {
          "value": "1c67f0d2-1326-41c1-9134-2e02669f2fdf"
     ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"0f5a57ef-9d61-40a3-9ed2-acd980dee020","displayName":"Remove Flag Group","members":[{"value":"8aecb0b2-76a6-4828-92aa-e2fbd6227efc"},{"value":"1c67f0d2-1326-41c1-9134-2e02669f2fdf"}],"meta":{"resourceType":"Group","created":"2026-02-...
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotgkj01cj128vkjq1rd0x/Groups/0f5a57ef-9d61-40a3-9ed2-acd980dee020
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"0f5a57ef-9d61-40a3-9ed2-acd980dee020","displayName":"Remove Flag Group","members":[{"value":"8aecb0b2-76a6-4828-92aa-e2fbd6227efc"},{"value":"1c67f0d2-1326-41c1-9134-2e02669f2fdf"}],"meta":{"resourceType":"Group","created":"2026-02-...
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotgkj01cj128vkjq1rd0x/Groups/0f5a57ef-9d61-40a3-9ed2-acd980dee020
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": [
        {
          "value": "8aecb0b2-76a6-4828-92aa-e2fbd6227efc"
     ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"0f5a57ef-9d61-40a3-9ed2-acd980dee020","displayName":"Remove Flag Group","members":[],"meta":{"resourceType":"Group","created":"2026-02-11T23:55:15.695Z","lastModified":"2026-02-11T23:55:15.79Z","location":"http://localhost:6000/scim...
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotgkj01cj128vkjq1rd0x/Groups/0f5a57ef-9d61-40a3-9ed2-acd980dee020
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"0f5a57ef-9d61-40a3-9ed2-acd980dee020","displayName":"Remove Flag Group","members":[],"meta":{"resourceType":"Group","created":"2026-02-11T23:55:15.695Z","lastModified":"2026-02-11T23:55:15.79Z","location":"http://localhost:6000/scim...
âœ… Multi-member REMOVE with flag=True accepted (removed 2 members)


========================================
TEST SECTION 6: ENDPOINT ISOLATION
========================================

--- Create Second Endpoint for Isolation Test ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/admin/endpoints
    ğŸ“‹   Body: {
  "displayName": "Isolation Test Endpoint",
  "name": "live-test-isolation-1987663110"
}
    ğŸ“‹ â† Response: {"id":"cmliotgps01d2128vjyx2nfaf","name":"live-test-isolation-1987663110","displayName":"Isolation Test Endpoint","active":true,"scimEndpoint":"/scim/endpoints/cmliotgps01d2128vjyx2nfaf","createdAt":"2026-02-11T23:55:15.809Z","updatedAt":"2026-02-11T23:55:15.809Z"}

--- Test: Same userName in Different Endpoints ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotgps01d2128vjyx2nfaf/Users
    ğŸ“‹   Body: {
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "livetest-user@test.com"
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"ad8d7e98-e168-4c9b-ac06-bcd475043d2f","userName":"livetest-user@test.com","active":true,"meta":{"resourceType":"User","created":"2026-02-11T23:55:15.847Z","lastModified":"2026-02-11T23:55:15.847Z","location":"http://localhost:6000/sc...
âœ… Same userName created in different endpoint (isolation works)

--- Test: Endpoint Data Isolation ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":6,"startIndex":1,"itemsPerPage":6,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Mu...
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotgps01d2128vjyx2nfaf/Users
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":1,"startIndex":1,"itemsPerPage":1,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"ad8d7e98-e168-4c9b-ac06-bcd475043d2f","userName":"livetest-user@test.com","active":true,"meta":{"resource...
âœ… Endpoints have isolated user data


========================================
TEST SECTION 7: INACTIVE ENDPOINT BLOCKING
========================================

--- Create Endpoint for Inactive Testing ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/admin/endpoints
    ğŸ“‹   Body: {
  "displayName": "Inactive Test Endpoint",
  "name": "live-test-inactive-655950638"
}
    ğŸ“‹ â† Response: {"id":"cmliotgrl01d8128vn4wjb111","name":"live-test-inactive-655950638","displayName":"Inactive Test Endpoint","active":true,"scimEndpoint":"/scim/endpoints/cmliotgrl01d8128vn4wjb111","createdAt":"2026-02-11T23:55:15.874Z","updatedAt":"2026-02-11T23:55:15.874Z"}
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotgrl01d8128vn4wjb111/Users
    ğŸ“‹   Body: {
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "inactive-test@test.com"
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"983db44b-197d-4c27-a0ae-09aa831d2e09","userName":"inactive-test@test.com","active":true,"meta":{"resourceType":"User","created":"2026-02-11T23:55:15.93Z","lastModified":"2026-02-11T23:55:15.93Z","location":"http://localhost:6000/scim...
Created test user: 983db44b-197d-4c27-a0ae-09aa831d2e09

--- Deactivate Endpoint ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/admin/endpoints/cmliotgrl01d8128vn4wjb111
    ğŸ“‹   Body: {"active":false}
    ğŸ“‹ â† Response: {"id":"cmliotgrl01d8128vn4wjb111","name":"live-test-inactive-655950638","displayName":"Inactive Test Endpoint","active":false,"scimEndpoint":"/scim/endpoints/cmliotgrl01d8128vn4wjb111","createdAt":"2026-02-11T23:55:15.874Z","updatedAt":"2026-02-11T23:55:15.954Z"}
âœ… Endpoint deactivated successfully

--- Test: SCIM Operations Return 403 on Inactive Endpoint ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotgrl01d8128vn4wjb111/Users/983db44b-197d-4c27-a0ae-09aa831d2e09
    ğŸ“‹ â† Error: Response status code does not indicate success: 403 (Forbidden).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Endpoint \"live-test-inactive-655950638\" is inactive. SCIM operations are not allowed.","status":"403"}
âœ… GET User returns 403 on inactive endpoint
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotgrl01d8128vn4wjb111/Users
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "should-fail@test.com"
}
    ğŸ“‹ â† Error: Response status code does not indicate success: 403 (Forbidden).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Endpoint \"live-test-inactive-655950638\" is inactive. SCIM operations are not allowed.","status":"403"}
âœ… POST User returns 403 on inactive endpoint
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotgrl01d8128vn4wjb111/Groups
    ğŸ“‹ â† Error: Response status code does not indicate success: 403 (Forbidden).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Endpoint \"live-test-inactive-655950638\" is inactive. SCIM operations are not allowed.","status":"403"}
âœ… GET Groups returns 403 on inactive endpoint
    ğŸ“‹ â†’ GET http://localhost:6000/scim/admin/endpoints?active=false
    ğŸ“‹ â† Response: {"id":"cmliotgrl01d8128vn4wjb111","name":"live-test-inactive-655950638","displayName":"Inactive Test Endpoint","active":false,"scimEndpoint":"/scim/endpoints/cmliotgrl01d8128vn4wjb111","createdAt":"2026-02-11T23:55:15.874Z","updatedAt":"2026-02-11T23:55:15.954Z"}
âœ… Inactive endpoint appears in active=false filter

--- Test: Reactivate Endpoint ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/admin/endpoints/cmliotgrl01d8128vn4wjb111
    ğŸ“‹   Body: {"active":true}
    ğŸ“‹ â† Response: {"id":"cmliotgrl01d8128vn4wjb111","name":"live-test-inactive-655950638","displayName":"Inactive Test Endpoint","active":true,"scimEndpoint":"/scim/endpoints/cmliotgrl01d8128vn4wjb111","createdAt":"2026-02-11T23:55:15.874Z","updatedAt":"2026-02-11T23:55:16.01Z"}
âœ… Endpoint reactivated successfully
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotgrl01d8128vn4wjb111/Users/983db44b-197d-4c27-a0ae-09aa831d2e09
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"983db44b-197d-4c27-a0ae-09aa831d2e09","userName":"inactive-test@test.com","active":true,"meta":{"resourceType":"User","created":"2026-02-11T23:55:15.93Z","lastModified":"2026-02-11T23:55:15.93Z","location":"http://localhost:6000/scim...
âœ… GET User works after reactivation


========================================
TEST SECTION 8: SCIM DISCOVERY ENDPOINTS
========================================

--- Test: ServiceProviderConfig ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/ServiceProviderConfig
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:ServiceProviderConfig"],"patch":{"supported":true},"bulk":{"supported":false},"filter":{"supported":true,"maxResults":200},"changePassword":{"supported":false},"sort":{"supported":false},"etag":{"supported":true},"authenticationSchemes":[{"type":...
âœ… ServiceProviderConfig has correct schema

--- Test: Schemas ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Schemas
Resulting JSON is truncated as serialization has exceeded the set depth of 4.
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:ListResponse"],"totalResults":2,"startIndex":1,"itemsPerPage":2,"Resources":[{"id":"urn:ietf:params:scim:schemas:core:2.0:User","name":"User","description":"User Account","attributes":[{"name":"userName","type":"string","multiValued":false,"requi...
âœ… Schemas endpoint returns schemas

--- Test: ResourceTypes ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/ResourceTypes
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:ListResponse"],"totalResults":2,"startIndex":1,"itemsPerPage":2,"Resources":[{"id":"User","name":"User","endpoint":"/Users","description":"User Account","schema":"urn:ietf:params:scim:schemas:core:2.0:User","schemaExtensions":[]},{"id":"Group","n...
âœ… ResourceTypes endpoint returns resource types


========================================
TEST SECTION 8b: CONTENT-TYPE & AUTH VERIFICATION
========================================

--- Test: Response Content-Type Header ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹ â† HTTP 200
    ğŸ“‹   ETag: W/"c38-L96gGgNsvmo32CfhSHNjxhp76Pk"
    ğŸ“‹   Content-Type: application/scim+json; charset=utf-8
âœ… Response Content-Type is application/scim+json (application/scim+json; charset=utf-8)
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹   Body: {
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "ct-test-1910868230@test.com"
}
    ğŸ“‹ â† HTTP 201
    ğŸ“‹   ETag: W/"2026-02-11T23:55:16.094Z"
    ğŸ“‹   Content-Type: application/scim+json; charset=utf-8
âœ… POST response Content-Type is application/scim+json
âœ… POST response status code is 201 Created

--- Test: Missing Auth Token â†’ 401 ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹ â† Error: Response status code does not indicate success: 401 (Unauthorized).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Missing bearer token.","status":"401","scimType":"invalidToken"}
âœ… Missing Authorization header returns 401

--- Test: Invalid Auth Token â†’ 401 ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹ â† Error: Response status code does not indicate success: 401 (Unauthorized).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Invalid bearer token.","status":"401","scimType":"invalidToken"}
âœ… Invalid Bearer token returns 401

--- Test: Token Without Bearer Prefix â†’ 401 ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹ â† Error: Response status code does not indicate success: 401 (Unauthorized).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Missing bearer token.","status":"401","scimType":"invalidToken"}
âœ… Token without 'Bearer ' prefix returns 401


========================================
TEST SECTION 9: ERROR HANDLING
========================================

--- Test: 404 for Non-Existent User ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/non-existent-id-12345
    ğŸ“‹ â† Error: Response status code does not indicate success: 404 (Not Found).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Resource non-existent-id-12345 not found.","scimType":"noTarget","status":"404"}
âœ… Non-existent user returns 404

--- Test: 404 for Non-Existent Group ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups/non-existent-id-12345
    ğŸ“‹ â† Error: Response status code does not indicate success: 404 (Not Found).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Resource non-existent-id-12345 not found.","scimType":"noTarget","status":"404"}
âœ… Non-existent group returns 404

--- Test: 404 for Non-Existent Endpoint ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/admin/endpoints/non-existent-id-12345
    ğŸ“‹ â† Error: Response status code does not indicate success: 404 (Not Found).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Endpoint with ID \"non-existent-id-12345\" not found","status":"404"}
âœ… Non-existent endpoint returns 404

--- Test: 409 for Duplicate userName ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹   Body: {
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "livetest-user@test.com"
}
    ğŸ“‹ â† Error: Response status code does not indicate success: 409 (Conflict).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"A resource with userName 'livetest-user@test.com' already exists.","scimType":"uniqueness","status":"409"}
âœ… Duplicate userName returns 409 Conflict

--- Test: 400 for Invalid Endpoint Name ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/admin/endpoints
    ğŸ“‹   Body: {"name":"invalid name with spaces"}
    ğŸ“‹ â† Error: Response status code does not indicate success: 400 (Bad Request).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Endpoint name must contain only alphanumeric characters, hyphens, and underscores","status":"400"}
âœ… Invalid endpoint name returns 400 Bad Request


========================================
TEST SECTION 9b: RFC 7644 COMPLIANCE CHECKS
========================================

--- Test: Location Header on POST /Users (RFC 7644 Â§3.1) ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹   Body: {
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "loc-header-test-1818547963@test.com"
}
    ğŸ“‹ â† HTTP 201
    ğŸ“‹   ETag: W/"2026-02-11T23:55:16.190Z"
    ğŸ“‹   Content-Type: application/scim+json; charset=utf-8
âœ… POST /Users returns 201 Created
âœ… POST /Users includes Location header
âœ… Location header matches meta.location

--- Test: Location Header on POST /Groups (RFC 7644 Â§3.1) ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:Group"
  ],
  "displayName": "Loc Header Test Group"
}
    ğŸ“‹ â† HTTP 201
    ğŸ“‹   ETag: W/"2026-02-11T23:55:16.203Z"
    ğŸ“‹   Content-Type: application/scim+json; charset=utf-8
âœ… POST /Groups returns 201 Created
âœ… POST /Groups includes Location header
âœ… Location header matches meta.location

--- Test: Error Response Format (RFC 7644 Â§3.12) ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/non-existent-error-format-test
    ğŸ“‹ â† HTTP 404
    ğŸ“‹   ETag: W/"9e-YWgP/gUNv+HaYtF6YYa2quRRIz4"
    ğŸ“‹   Content-Type: application/scim+json; charset=utf-8
âœ… Error returns 404 status code
âœ… Error Content-Type is application/scim+json
âœ… Error has SCIM Error schema
âœ… Error status is string type: '404'
âœ… Error status value is '404'
âœ… Error includes detail message

--- Test: 409 Error Response Format ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹   Body: {
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "livetest-user@test.com"
}
    ğŸ“‹ â† HTTP 409
    ğŸ“‹   ETag: W/"af-aHyDKU1ibpB9xkCNEpyO4k83RuM"
    ğŸ“‹   Content-Type: application/scim+json; charset=utf-8
âœ… Duplicate returns 409
âœ… 409 error Content-Type is application/scim+json
âœ… 409 error status is string '409'

--- Test: PATCH Updates meta.lastModified ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹   Body: {
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "timestamp-test-2006770646@test.com"
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"045406bb-d916-45e3-9ed9-38307cd96c4e","userName":"timestamp-test-2006770646@test.com","active":true,"meta":{"resourceType":"User","created":"2026-02-11T23:55:16.241Z","lastModified":"2026-02-11T23:55:16.241Z","location":"http://local...
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/045406bb-d916-45e3-9ed9-38307cd96c4e
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": "Timestamp Updated",
      "path": "displayName",
      "op": "replace"
   ...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"045406bb-d916-45e3-9ed9-38307cd96c4e","userName":"timestamp-test-2006770646@test.com","active":true,"displayName":"Timestamp Updated","meta":{"resourceType":"User","created":"2026-02-11T23:55:16.241Z","lastModified":"2026-02-11T23:55...
âœ… PATCH updates meta.lastModified timestamp
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/045406bb-d916-45e3-9ed9-38307cd96c4e
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"045406bb-d916-45e3-9ed9-38307cd96c4e","userName":"timestamp-test-2006770646@test.com","active":true,"displayName":"Timestamp Updated","meta":{"resourceType":"User","created":"2026-02-11T23:55:16.241Z","lastModified":"2026-02-11T23:55...
âœ… GET does not change meta.lastModified


========================================
TEST SECTION 9c: POST /.search (RFC 7644 Â§3.4.3)
========================================

--- Test: POST /Users/.search Basic ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/.search
    ğŸ“‹   Body: {
  "count": 10,
  "startIndex": 1,
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:SearchRequest"
  ],
  "filter": "userName eq \"livetest-user@test.com\""
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":1,"startIndex":1,"itemsPerPage":1,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Mu...
âœ… POST /Users/.search returns ListResponse schema
âœ… POST /Users/.search finds user via filter
âœ… POST /Users/.search includes startIndex
âœ… POST /Users/.search includes itemsPerPage

--- Test: POST /Users/.search Returns HTTP 200 ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/.search
    ğŸ“‹   Body: {
  "count": 10,
  "startIndex": 1,
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:SearchRequest"
  ],
  "filter": "userName eq \"livetest-user@test.com\""
}
    ğŸ“‹ â† HTTP 200
    ğŸ“‹   ETag: W/"323-jY93yzy5Hc9RyPlseApVWkeelpM"
    ğŸ“‹   Content-Type: application/scim+json; charset=utf-8
âœ… POST /Users/.search returns HTTP 200 (not 201)
âœ… POST /Users/.search Content-Type is application/scim+json

--- Test: POST /Users/.search with Attributes ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/.search
    ğŸ“‹   Body: {
  "count": 10,
  "startIndex": 1,
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:SearchRequest"
  ],
  "filter": "userName eq \"livetest-user@test.com\"",
  "attributes": "userN...
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":1,"startIndex":1,"itemsPerPage":1,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","meta":{"resourceType":"User","created":"2026-02-11T23:55:14.383Z",...
âœ… POST /.search with attributes includes userName
âœ… POST /.search always returns id (always-returned)
âœ… POST /.search always returns schemas (always-returned)
âœ… POST /.search with attributes excludes non-requested attrs (emails)

--- Test: POST /Users/.search with excludedAttributes ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/.search
    ğŸ“‹   Body: {
  "excludedAttributes": "emails,phoneNumbers",
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:SearchRequest"
  ],
  "filter": "userName eq \"livetest-user@test.com\""
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":1,"startIndex":1,"itemsPerPage":1,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Mu...
âœ… POST /.search with excludedAttributes keeps userName
âœ… POST /.search with excludedAttributes removes emails

--- Test: POST /Users/.search Without Filter ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/.search
    ğŸ“‹   Body: {
  "count": 5,
  "startIndex": 1,
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:SearchRequest"
  ]
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":9,"startIndex":1,"itemsPerPage":5,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Mu...
âœ… POST /Users/.search without filter lists users
âœ… POST /Users/.search respects count parameter

--- Test: POST /Groups/.search Basic ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups/.search
    ğŸ“‹   Body: {
  "count": 10,
  "startIndex": 1,
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:SearchRequest"
  ],
  "filter": "displayName eq \"Replaced Group Name\""
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":1,"startIndex":1,"itemsPerPage":1,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"f810e9f6-1e01-448c-acd2-365ffed5968f","displayName":"Replaced Group Name","members":[],"meta":{"resource...
âœ… POST /Groups/.search returns ListResponse schema
âœ… POST /Groups/.search finds group via filter

--- Test: POST /Groups/.search with excludedAttributes ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups/.search
    ğŸ“‹   Body: {
  "excludedAttributes": "members",
  "startIndex": 1,
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:SearchRequest"
  ],
  "count": 50
}
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":4,"startIndex":1,"itemsPerPage":4,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"f810e9f6-1e01-448c-acd2-365ffed5968f","displayName":"Replaced Group Name","meta":{"resourceType":"Group"...
âœ… POST /Groups/.search excludedAttributes removes members
âœ… POST /Groups/.search excludedAttributes keeps displayName


========================================
TEST SECTION 9d: ATTRIBUTE PROJECTION (RFC 7644 Â§3.4.2.5)
========================================

--- Test: GET /Users with attributes Param ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users?attributes=userName,displayName&count=5
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":9,"startIndex":1,"itemsPerPage":5,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","meta":{"resourceType":"User","created":"2026-02-11T23:55:14.383Z",...
âœ… GET /Users?attributes works
âœ… attributes param includes userName
âœ… attributes param always returns id
âœ… attributes param always returns schemas
âœ… attributes param excludes non-requested emails
âœ… attributes param excludes non-requested active

--- Test: GET /Users/:id with attributes Param ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f?attributes=userName
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","meta":{"resourceType":"User","created":"2026-02-11T23:55:14.383Z","lastModified":"2026-02-11T23:55:14.887Z","location":"http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a7...
âœ… GET User by ID with attributes includes userName
âœ… GET User by ID with attributes always returns id
âœ… GET User by ID with attributes always returns meta
âœ… GET User by ID with attributes excludes displayName

--- Test: GET /Users with excludedAttributes Param ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users?excludedAttributes=emails,phoneNumbers&count=5
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":9,"startIndex":1,"itemsPerPage":5,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Mu...
âœ… excludedAttributes keeps userName
âœ… excludedAttributes always keeps id
âœ… excludedAttributes removes emails
âœ… excludedAttributes removes phoneNumbers

--- Test: GET /Users/:id with excludedAttributes ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f?excludedAttributes=name,emails
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","userName":"livetest-user@test.com","active":true,"displayName":"Multi-Op User","urn:ietf:params:scim:schemas:extension:enterprise:2.0:User":{"department":"Product"},"title":"Engineer","meta":{"r...
âœ… GET User excludedAttributes keeps userName
âœ… GET User excludedAttributes removes name
âœ… GET User excludedAttributes removes emails
âœ… GET User excludedAttributes always keeps id (never excluded)
âœ… GET User excludedAttributes always keeps schemas (never excluded)

--- Test: GET /Groups with attributes Param ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups?attributes=displayName&count=5
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":4,"startIndex":1,"itemsPerPage":4,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"f810e9f6-1e01-448c-acd2-365ffed5968f","meta":{"resourceType":"Group","created":"2026-02-11T23:55:15.019Z...
âœ… GET /Groups attributes includes displayName
âœ… GET /Groups attributes always returns id
âœ… GET /Groups attributes excludes non-requested members

--- Test: GET /Groups/:id with excludedAttributes ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups/f810e9f6-1e01-448c-acd2-365ffed5968f?excludedAttributes=members
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:Group"],"id":"f810e9f6-1e01-448c-acd2-365ffed5968f","displayName":"Replaced Group Name","meta":{"resourceType":"Group","created":"2026-02-11T23:55:15.019Z","lastModified":"2026-02-11T23:55:15.152Z","location":"http://localhost:6000/scim/endpoints...
âœ… GET Group excludedAttributes keeps displayName
âœ… GET Group excludedAttributes removes members

--- Test: attributes Precedence Over excludedAttributes ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users?attributes=userName,displayName&excludedAttributes=displayName&count=1
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:api:messages:2.0:ListResponse"],"totalResults":9,"startIndex":1,"itemsPerPage":1,"Resources":[{"schemas":["urn:ietf:params:scim:schemas:core:2.0:User"],"id":"1a7a769a-3af5-433f-bd64-4d5421ae803f","meta":{"resourceType":"User","created":"2026-02-11T23:55:14.383Z",...
âœ… Precedence test: attributes includes userName
âœ… Precedence test: attributes wins â€” displayName included despite excludedAttributes


========================================
TEST SECTION 9e: ETag & CONDITIONAL REQUESTS (RFC 7644 Â§3.14)
========================================

--- Test: ETag Header on GET /Users/:id ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹ â† HTTP 200
    ğŸ“‹   ETag: W/"2026-02-11T23:55:14.887Z"
    ğŸ“‹   Content-Type: application/scim+json; charset=utf-8
âœ… GET /Users/:id includes ETag header
âœ… ETag is a weak ETag (W/"...") format: W/"2026-02-11T23:55:14.887Z"
âœ… meta.version matches ETag header value

--- Test: ETag Header on GET /Groups/:id ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups/f810e9f6-1e01-448c-acd2-365ffed5968f
    ğŸ“‹ â† HTTP 200
    ğŸ“‹   ETag: W/"2026-02-11T23:55:15.152Z"
    ğŸ“‹   Content-Type: application/scim+json; charset=utf-8
âœ… GET /Groups/:id includes ETag header
âœ… Group ETag is weak ETag format

--- Test: If-None-Match â†’ 304 Not Modified ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹ â† HTTP 304
    ğŸ“‹   ETag: W/"2026-02-11T23:55:14.887Z"
âœ… If-None-Match with matching ETag returns 304 Not Modified

--- Test: If-None-Match with Stale ETag â†’ 200 ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹ â† HTTP 200
    ğŸ“‹   ETag: W/"2026-02-11T23:55:14.887Z"
    ğŸ“‹   Content-Type: application/scim+json; charset=utf-8
âœ… If-None-Match with stale ETag returns 200 with full resource

--- Test: ETag Changes After PATCH ---
    ğŸ“‹ â†’ PATCH http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "schemas": [
    "urn:ietf:params:scim:api:messages:2.0:PatchOp"
  ],
  "Operations": [
    {
      "value": "ETag Changed User",
      "path": "displayName",
      "op": "replace"
   ...
    ğŸ“‹ â† HTTP 200
    ğŸ“‹   ETag: W/"2026-02-11T23:55:16.913Z"
    ğŸ“‹   Content-Type: application/scim+json; charset=utf-8
âœ… PATCH response includes ETag header
âœ… ETag changed after PATCH (before: W/"2026-02-11T23:55:14.887Z", after: W/"2026-02-11T23:55:16.913Z")

--- Test: Old ETag After Modification â†’ 200 ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹ â† HTTP 200
    ğŸ“‹   ETag: W/"2026-02-11T23:55:16.913Z"
    ğŸ“‹   Content-Type: application/scim+json; charset=utf-8
âœ… Old ETag after modification returns 200 (resource changed)

--- Test: POST /Users Includes ETag ---
    ğŸ“‹ â†’ POST http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users
    ğŸ“‹   Body: {
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "etag-create-1798278299@test.com"
}
    ğŸ“‹ â† HTTP 201
    ğŸ“‹   ETag: W/"2026-02-11T23:55:16.946Z"
    ğŸ“‹   Content-Type: application/scim+json; charset=utf-8
âœ… POST /Users response includes ETag header
âœ… POST /Users returns 201 with ETag

--- Test: PUT /Users Includes ETag ---
    ğŸ“‹ â†’ PUT http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹   Body: {
  "displayName": "Put ETag Test",
  "active": true,
  "schemas": [
    "urn:ietf:params:scim:schemas:core:2.0:User"
  ],
  "userName": "livetest-user@test.com"
}
    ğŸ“‹ â† HTTP 200
    ğŸ“‹   ETag: W/"2026-02-11T23:55:16.968Z"
    ğŸ“‹   Content-Type: application/scim+json; charset=utf-8
âœ… PUT /Users response includes ETag header

--- Test: ServiceProviderConfig etag.supported ---
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/ServiceProviderConfig
    ğŸ“‹ â† Response: {"schemas":["urn:ietf:params:scim:schemas:core:2.0:ServiceProviderConfig"],"patch":{"supported":true},"bulk":{"supported":false},"filter":{"supported":true,"maxResults":200},"changePassword":{"supported":false},"sort":{"supported":false},"etag":{"supported":true},"authenticationSchemes":[{"type":...
âœ… ServiceProviderConfig etag.supported = true


========================================
TEST SECTION 10: DELETE OPERATIONS
========================================

--- Test: Delete User ---
    ğŸ“‹ â†’ DELETE http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹ â† Response: ""
    ğŸ“‹ â†’ GET http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Users/1a7a769a-3af5-433f-bd64-4d5421ae803f
    ğŸ“‹ â† Error: Response status code does not indicate success: 404 (Not Found).
    ğŸ“‹   Error Body: {"schemas":["urn:ietf:params:scim:api:messages:2.0:Error"],"detail":"Resource 1a7a769a-3af5-433f-bd64-4d5421ae803f not found.","scimType":"noTarget","status":"404"}
âœ… DELETE user works (returns 204, user not found after)

--- Test: Delete Group ---
    ğŸ“‹ â†’ DELETE http://localhost:6000/scim/endpoints/cmliotfgz019d128vwurivo17/Groups/f810e9f6-1e01-448c-acd2-365ffed5968f
    ğŸ“‹ â† Response: ""
âœ… DELETE group works


========================================
CLEANUP: Removing Test Endpoints
========================================

--- Deleting Test Endpoints (Cascade Delete) ---
    ğŸ“‹ â†’ DELETE http://localhost:6000/scim/admin/endpoints/cmliotfgz019d128vwurivo17
    ğŸ“‹ â† Response: ""
  âœ… Deleted Main Test Endpoint
    ğŸ“‹ â†’ DELETE http://localhost:6000/scim/admin/endpoints/cmliotgcl01bm128v331k664y
    ğŸ“‹ â† Response: ""
  âœ… Deleted No Flag Endpoint
    ğŸ“‹ â†’ DELETE http://localhost:6000/scim/admin/endpoints/cmliotgkj01cj128vkjq1rd0x
    ğŸ“‹ â† Response: ""
  âœ… Deleted Remove Flag Endpoint
    ğŸ“‹ â†’ DELETE http://localhost:6000/scim/admin/endpoints/cmliotgps01d2128vjyx2nfaf
    ğŸ“‹ â† Response: ""
  âœ… Deleted Isolation Endpoint
    ğŸ“‹ â†’ DELETE http://localhost:6000/scim/admin/endpoints/cmliotgrl01d8128vn4wjb111
    ğŸ“‹ â† Response: ""
  âœ… Deleted Inactive Endpoint


========================================
FINAL TEST SUMMARY
========================================
Tests Passed: 183
Tests Failed: 0
Total Tests:  183
Duration:     3s
    ğŸ“‹ Base URL: http://localhost:6000

ğŸ‰ ALL TESTS PASSED!

========================================

