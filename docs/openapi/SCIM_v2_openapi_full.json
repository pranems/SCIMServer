{
  "openapi": "3.0.3",
  "info": {
    "title": "SCIM v2 Full OpenAPI Spec (Examples)",
    "version": "1.0.0",
    "description": "Comprehensive OpenAPI v3 spec for SCIM v2 core endpoints, with complete request/response schemas and examples. Implementation-agnostic."
  },
  "servers": [{ "url": "https://api.example.com/scim/v2", "description": "Example SCIM server" }],
  "paths": {
    "/ServiceProviderConfig": {
      "get": {
        "summary": "Service provider configuration",
        "responses": {
          "200": {
            "description": "ServiceProviderConfig",
            "content": {
              "application/scim+json": {
                "schema": { "$ref": "#/components/schemas/ServiceProviderConfig" },
                "example": {
                  "schemas": ["urn:ietf:params:scim:schemas:core:2.0:ServiceProviderConfig"],
                  "patch": { "supported": true },
                  "bulk": { "supported": false },
                  "filter": { "supported": true, "maxResults": 200 },
                  "sort": { "supported": false },
                  "etag": { "supported": true },
                  "authenticationSchemes": [ { "type": "oauthbearertoken", "name": "OAuth 2.0 Bearer Token", "specUri": "https://tools.ietf.org/html/rfc6750" } ]
                }
              }
            }
          }
        }
      }
    },
    "/ResourceTypes": {
      "get": {
        "summary": "List resource types",
        "responses": { "200": { "description": "ResourceTypes list", "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/ListResponse" } } } } }
      }
    },
    "/Schemas": {
      "get": { "summary": "List schemas", "responses": { "200": { "description": "Schemas", "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/ListResponse" } } } } } }
    },
    "/Users": {
      "get": {
        "summary": "Query / list Users",
        "parameters": [
          { "name": "startIndex", "in": "query", "schema": { "type": "integer", "default": 1 } },
          { "name": "count", "in": "query", "schema": { "type": "integer", "default": 100 } },
          { "name": "filter", "in": "query", "schema": { "type": "string" } },
          { "name": "attributes", "in": "query", "schema": { "type": "string" }, "description": "Comma-separated attributes to include (RFC 7644 §3.4.2.5)" },
          { "name": "excludedAttributes", "in": "query", "schema": { "type": "string" }, "description": "Comma-separated attributes to exclude" },
          { "name": "sortBy", "in": "query", "schema": { "type": "string" } },
          { "name": "sortOrder", "in": "query", "schema": { "type": "string", "enum": ["ascending", "descending"] } }
        ],
        "responses": { "200": { "description": "List of Users", "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/ListResponse" } } } } }
      },
      "post": {
        "summary": "Create User",
        "requestBody": { "required": true, "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/User" } } } },
        "responses": {
          "201": { "description": "Created", "headers": { "ETag": { "schema": { "type": "string" } } }, "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/User" } } } },
          "409": { "description": "Conflict (uniqueness)", "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/ScimError" } } } }
        }
      }
    },
    "/Users/.search": {
      "post": {
        "summary": "Search Users via POST (RFC 7644 §3.4.3)",
        "requestBody": { "required": true, "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/SearchRequest" } } } },
        "responses": { "200": { "description": "ListResponse", "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/ListResponse" } } } } }
      }
    },
    "/Users/{id}": {
      "parameters": [ { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } } ],
      "get": {
        "summary": "Get User by id",
        "parameters": [
          { "name": "attributes", "in": "query", "schema": { "type": "string" }, "description": "Comma-separated attributes to include" },
          { "name": "excludedAttributes", "in": "query", "schema": { "type": "string" }, "description": "Comma-separated attributes to exclude" }
        ],
        "responses": {
          "200": { "description": "User", "headers": { "ETag": { "schema": { "type": "string" }, "description": "Resource version" } }, "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/User" } } } },
          "304": { "description": "Not Modified — If-None-Match matched current ETag" },
          "404": { "description": "Not found", "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/ScimError" } } } }
        }
      },
      "put": { "summary": "Replace User", "requestBody": { "required": true, "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/User" } } } }, "responses": { "200": { "description": "Updated", "headers": { "ETag": { "schema": { "type": "string" } } }, "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/User" } } } }, "404": { "description": "Not found" }, "412": { "description": "Precondition Failed" } } },
      "patch": { "summary": "Patch User", "requestBody": { "required": true, "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/PatchOp" } } } }, "responses": { "200": { "description": "Patched", "headers": { "ETag": { "schema": { "type": "string" } } } }, "404": { "description": "Not found" }, "412": { "description": "Precondition Failed" } } },
      "delete": { "summary": "Delete User", "responses": { "204": { "description": "No Content" }, "404": { "description": "Not found" } } }
    },
    "/Groups": {
      "get": {
        "summary": "List Groups",
        "parameters": [
          { "name": "startIndex", "in": "query", "schema": { "type": "integer" } },
          { "name": "count", "in": "query", "schema": { "type": "integer" } },
          { "name": "filter", "in": "query", "schema": { "type": "string" } },
          { "name": "attributes", "in": "query", "schema": { "type": "string" }, "description": "Comma-separated attributes to include" },
          { "name": "excludedAttributes", "in": "query", "schema": { "type": "string" }, "description": "Comma-separated attributes to exclude, e.g. members" }
        ],
        "responses": { "200": { "description": "List", "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/ListResponse" } } } } }
      },
      "post": { "summary": "Create Group", "requestBody": { "required": true, "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/Group" } } } }, "responses": { "201": { "description": "Created", "headers": { "ETag": { "schema": { "type": "string" } } }, "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/Group" } } } } } }
    },
    "/Groups/.search": {
      "post": {
        "summary": "Search Groups via POST (RFC 7644 §3.4.3)",
        "requestBody": { "required": true, "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/SearchRequest" } } } },
        "responses": { "200": { "description": "ListResponse", "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/ListResponse" } } } } }
      }
    },
    "/Groups/{id}": {
      "parameters": [ { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } } ],
      "get": {
        "summary": "Get Group",
        "parameters": [
          { "name": "attributes", "in": "query", "schema": { "type": "string" }, "description": "Comma-separated attributes to include" },
          { "name": "excludedAttributes", "in": "query", "schema": { "type": "string" }, "description": "Comma-separated attributes to exclude, e.g. members" }
        ],
        "responses": {
          "200": { "description": "Group", "headers": { "ETag": { "schema": { "type": "string" } } }, "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/Group" } } } },
          "304": { "description": "Not Modified" },
          "404": { "description": "Not found" }
        }
      },
      "put": { "summary": "Replace Group", "requestBody": { "required": true, "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/Group" } } } }, "responses": { "200": { "description": "Updated", "headers": { "ETag": { "schema": { "type": "string" } } } }, "412": { "description": "Precondition Failed" } } },
      "patch": { "summary": "Patch Group", "requestBody": { "required": true, "content": { "application/scim+json": { "schema": { "$ref": "#/components/schemas/PatchOp" } } } }, "responses": { "200": { "description": "Patched", "headers": { "ETag": { "schema": { "type": "string" } } } }, "412": { "description": "Precondition Failed" } } },
      "delete": { "summary": "Delete Group", "responses": { "204": { "description": "No content" } } }
    }
  },
  "components": {
    "schemas": {
      "UserName": { "type": "string", "description": "Unique username" },
      "Meta": {
        "type": "object",
        "properties": {
          "resourceType": { "type": "string" },
          "created": { "type": "string", "format": "date-time" },
          "lastModified": { "type": "string", "format": "date-time" },
          "location": { "type": "string", "format": "uri" },
          "version": { "type": "string", "description": "ETag value for conditional requests (RFC 7644 §3.14)" }
        }
      },
      "Name": {
        "type": "object",
        "properties": {
          "formatted": { "type": "string" },
          "familyName": { "type": "string" },
          "givenName": { "type": "string" },
          "middleName": { "type": "string" },
          "honorificPrefix": { "type": "string" },
          "honorificSuffix": { "type": "string" }
        }
      },
      "User": {
        "type": "object",
        "required": ["schemas","userName"],
        "properties": {
          "schemas": { "type": "array", "items": { "type": "string" } },
          "id": { "type": "string" },
          "externalId": { "type": "string" },
          "userName": { "$ref": "#/components/schemas/UserName" },
          "name": { "$ref": "#/components/schemas/Name" },
          "displayName": { "type": "string" },
          "nickName": { "type": "string" },
          "profileUrl": { "type": "string", "format": "uri" },
          "title": { "type": "string" },
          "userType": { "type": "string" },
          "preferredLanguage": { "type": "string" },
          "locale": { "type": "string" },
          "timezone": { "type": "string" },
          "active": { "type": "boolean" },
          "password": { "type": "string" },
          "emails": { "type": "array", "items": { "type": "object", "properties": { "value": { "type": "string" }, "type": { "type": "string" }, "primary": { "type": "boolean" } } } },
          "phoneNumbers": { "type": "array", "items": { "type": "object", "properties": { "value": { "type": "string" }, "type": { "type": "string" } } } },
          "ims": { "type": "array", "items": { "type": "object", "properties": { "value": { "type": "string" }, "type": { "type": "string" } } } },
          "photos": { "type": "array", "items": { "type": "object", "properties": { "value": { "type": "string", "format": "uri" }, "type": { "type": "string" } } } },
          "addresses": { "type": "array", "items": { "type": "object", "properties": { "streetAddress": { "type": "string" }, "locality": { "type": "string" }, "region": { "type": "string" }, "postalCode": { "type": "string" }, "country": { "type": "string" }, "type": { "type": "string" }, "formatted": { "type": "string" } } } },
          "entitlements": { "type": "array", "items": { "type": "string" } },
          "roles": { "type": "array", "items": { "type": "string" } },
          "groups": { "type": "array", "items": { "type": "object", "properties": { "value": { "type": "string" }, "display": { "type": "string" } } } },
          "meta": { "$ref": "#/components/schemas/Meta" },
          "urn:ietf:params:scim:schemas:extension:enterprise:2.0:User": { "$ref": "#/components/schemas/EnterpriseUser" }
        }
      },
      "EnterpriseUser": {
        "type": "object",
        "properties": {
          "employeeNumber": { "type": "string" },
          "costCenter": { "type": "string" },
          "organization": { "type": "string" },
          "division": { "type": "string" },
          "department": { "type": "string" },
          "manager": { "type": "object", "properties": { "value": { "type": "string" }, "displayName": { "type": "string" } } }
        }
      },
      "Group": {
        "type": "object",
        "required": ["schemas","displayName"],
        "properties": {
          "schemas": { "type": "array", "items": { "type": "string" } },
          "id": { "type": "string" },
          "displayName": { "type": "string" },
          "externalId": { "type": "string" },
          "members": { "type": "array", "items": { "type": "object", "properties": { "value": { "type": "string" }, "display": { "type": "string" }, "type": { "type": "string" } } } },
          "meta": { "$ref": "#/components/schemas/Meta" }
        }
      },
      "PatchOp": {
        "type": "object",
        "properties": {
          "schemas": { "type": "array", "items": { "type": "string" } },
          "Operations": { "type": "array", "items": { "type": "object", "properties": { "op": { "type": "string", "enum": ["add","replace","remove"] }, "path": { "type": "string" }, "value": {} } } }
        }
      },
      "ListResponse": { "type": "object", "properties": { "schemas": { "type": "array" }, "totalResults": { "type": "integer" }, "startIndex": { "type": "integer" }, "itemsPerPage": { "type": "integer" }, "Resources": { "type": "array", "items": {} } } },
      "ScimError": { "type": "object", "properties": { "schemas": { "type": "array" }, "status": { "type": "string" }, "scimType": { "type": "string" }, "detail": { "type": "string" } } },
      "ServiceProviderConfig": { "type": "object", "properties": { "schemas": { "type": "array" }, "patch": { "type": "object" }, "bulk": { "type": "object" }, "filter": { "type": "object" }, "sort": { "type": "object" }, "etag": { "type": "object", "properties": { "supported": { "type": "boolean" } } }, "authenticationSchemes": { "type": "array", "items": { "type": "object" } } } },
      "SearchRequest": {
        "type": "object",
        "description": "RFC 7644 §3.4.3 SearchRequest for POST /.search",
        "properties": {
          "schemas": { "type": "array", "items": { "type": "string" } },
          "filter": { "type": "string" },
          "startIndex": { "type": "integer", "default": 1 },
          "count": { "type": "integer", "default": 100 },
          "attributes": { "type": "string" },
          "excludedAttributes": { "type": "string" },
          "sortBy": { "type": "string" },
          "sortOrder": { "type": "string", "enum": ["ascending", "descending"] }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": { "type": "http", "scheme": "bearer", "bearerFormat": "JWT" }
    }
  },
  "security": [ { "bearerAuth": [] } ]
}
